{% extends 'base.html' %}
{% load helpers %}

{% block title %}
  Service: {{ object.display_name|default:object.name }}
{% endblock %}

{% block content %}

<div class="row">
  <div class="col col-md-12">

    <div class="page-header">
      <h1>
        {{ object.display_name|default:object.name }}
        <span class="text-muted">({{ object.name }})</span>
      </h1>

      <div class="btn-group float-right" role="group">
        <a href="{% url 'plugins:nbtools:service_edit' pk=object.pk %}"
           class="btn btn-primary">
          <i class="mdi mdi-pencil"></i> Edit
        </a>

        <a href="{% url 'plugins:nbtools:service_delete' pk=object.pk %}"
           class="btn btn-danger">
          <i class="mdi mdi-trash-can"></i> Delete
        </a>

        <a href="{% url 'plugins:nbtools:service_changelog' pk=object.pk %}"
           class="btn btn-secondary">
          <i class="mdi mdi-history"></i> Changelog
        </a>
      </div>
    </div>

    <hr>

    <div class="panel panel-default">
      <div class="panel-heading"><strong>Service Details</strong></div>
      <table class="table table-hover panel-body">
        <tr>
          <th>Name</th>
          <td>{{ object.name }}</td>
        </tr>
        <tr>
          <th>Display Name</th>
          <td>{{ object.display_name }}</td>
        </tr>
        <tr>
          <th>Description</th>
          <td>{{ object.description|linebreaksbr }}</td>
        </tr>
        <tr>
          <th>Service Owner</th>
          <td>{{ object.service_owner }}</td>
        </tr>
      </table>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading"><strong>Applications in this Service</strong></div>
      <div class="panel-body">
        {% if object.applications.all %}
          <ul>
            {% for app in object.applications.all %}
              <li>
                <a href="{% url 'plugins:nbtools:application' pk=app.pk %}">
                  {{ app.display_name|default:app.name }}
                </a>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <span class="text-muted">No applications linked.</span>
        {% endif %}
      </div>
    </div>

  </div>
</div>

{% endblock %}